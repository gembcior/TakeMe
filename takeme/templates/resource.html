{% extends 'base.html' %}

{% block content %}

<div class="form-add-resource w-100 m-auto">

<h1 class="h3 mb-3 fw-normal">Update {{ resource.name }}</h1>

<form class="align-items-center needs-validation" action="{{ url_for('ui.resource.update_by_id', id=resource.id) }}" method="POST" novalidate>

  {{ form.hidden_tag() }}

  <div class="row my-2">
    <div class="col">
      <label>{{ form.name.label }}</label>
      {{ form.name(class_="form-control", required="true") }}

      {% if form.name.errors %}
        {% for error in form.name.errors %}
          <div class="invalid-feedback">
            {{ error }}
          </div>
        {% endfor %}
      {% endif %}
    </div>

    <div class="col-md-4">
      <label>{{ form.resource_type.label }}</label>
      {{ form.resource_type(class_="form-select", required="true") }}
    </div>
  </div>

  <div class="row my-2">
    <div class="col">
      <label>{{ form.notes.label }}</label>
      {{ form.notes(class_="form-control", required="true") }}

      {% if form.notes.errors %}
        {% for error in form.notes.errors %}
          <div class="invalid-feedback">
            {{ error }}
          </div>
        {% endfor %}
      {% endif %}
    </div>
  </div>

  <div class="my-4">
    {{ form.submit(class_="btn btn-primary") }}
  </div>

</form>

<hr class="my-4">

<div class="d-flex justify-content-end align-items-center mt-4">
  <button type="button" class="btn btn-warning" id="resourceReleaseButton" data-bs-resource-id="{{ resource.id }}">Release</button>
</div>

<div class="d-flex justify-content-end align-items-center mt-4">
  <button type="button" class="btn btn-danger" id="resourceDeleteButton" data-bs-resource-id="{{ resource.id }}">Delete</button>
</div>

</div>
{% endblock content %}

{% block scripts %}

<script src="{{ url_for('static', filename='js/resource.js') }}"></script>
<script>
$(document).ready(function() {
  document.getElementById("resourceReleaseButton").addEventListener("click", function() {
    const id = this.getAttribute('data-bs-resource-id')
    releaseResource(id)
  });

  document.getElementById("resourceDeleteButton").addEventListener("click", function() {
    const id = this.getAttribute('data-bs-resource-id')
    deleteResource(id)
  });
});
</script>

{% endblock scripts %}
